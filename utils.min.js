(function(){"use strict";String.prototype.format=function(){var n,t;if(arguments.length===0)throw"Arguments array length must be two or greater.";n=this;for(t in arguments)n=n.replace("{"+t+"}",arguments[t]);return n};String.prototype.contains=function(n){return this.indexOf(n)!==-1};String.isNullOrWhitespace=function(n){return typeof n=="undefined"||n===null?!0:n.replace(/\s/g,"").length<1}})(),function(n){n.path={combine:function(){var n,t,u,r,i;if(arguments.length===0)return"";if(Array.isArray(arguments[0]))n=arguments[0];else{n=new Array(arguments.length);for(r in arguments)n[r]=new String(arguments[r])}if(n.length===0)return"";t=new String(n[0]);n=n.slice(1,n.length);t.startsWith("/")||(t="/"+t);u=t.endsWith("/");for(r in n)i=n[r],t+=i.startsWith("/")?u?i.substring(1,i.length):i:u?i:"/"+i,u=t.endsWith("/");return t}};n.screen={getCenterPosition:function(n,t){var i=screen.width/2-n/2,r=screen.height/2-t/2;return{x:i,y:r}}};n.imageView={displayLocalImage:function(n,t){if(n){var i=new FileReader;i.onload=function(n){typeof t=="function"&&t(n.target.result)};i.readAsDataURL(n)}}};n.objects={hasProp:function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},copyProperties:function(n,t,i){var u=Object.prototype.hasOwnProperty,r;if(!t||!n)throw"Source or Receiver object is null.";typeof i!="boolean"&&(i=!0);for(r in t)i?u.call(n,r)&&(n[r]=t[r]):n[r]=t[r]}}}(window.utils=window.utils||{}),function(n){"use strict";var f="f14shm4n",e="1.0.0",i=Object.prototype.hasOwnProperty,r={},t={},o=navigator.language||navigator.userLanguage,u=function(n){r.debugMode&&console.log(n)},s=function(){n.settings({})};n.f14Info=function(){return{Author:f,Version:e}};n.getString=function(n){var i=undefined;try{i=t[o][n]}catch(r){u(`Cannot find key: ${n}. Return default value.`)}return i};n.addLocale=function(n,f){var o,e,s;i.call(t,n)||(t[n]={});for(o in f)i.call(f,o)&&(e=o,s=f[o],i.call(t[n],e)?(u(`LangMap[${n}] already contains key: ${e}`),r.rereplaceExists&&(u(`Replace value for key: ${e}. Old value: ${t[n][e]}, New value: ${s}`),t[n][e]=s)):t[n][e]=s)};n.addLocaleMap=function(t){var r,u,f;for(r in t)i.call(t,r)&&(u=r,f=t[r],n.addLocale(u,f))};n.settings=function(n){r.debugMode=n.debugMode||!0;r.replaceExists=n.replaceExists||!0};s()}(window.l10n=window.l10n||{}),function(n,t){"use strict";function i(t){function l(n){f.prop("src",n.target.result);var t=new Image;t.onload=function(){var n=this.naturalWidth,t=this.naturalHeight;r?!r.disable&&(n>r.maxWidth||t>r.maxHeight)?(i=!1,e&&e.effect("shake")):i=!0:i=!0};t.src=n.target.result}var f=n(t.imageElement),o=n(t.inputElement),s=n(t.uploadButton),e=n(t.errorElement),r=t.imgRestrictions,h=t.requestUploadUrl,c=t.callback,u,i=!1;o.on("change",function(){u=this.files[0];var n=new FileReader;n.onload=l;n.readAsDataURL(u)});s.on("click",function(){if(!i){n("body").bsModal({title:"Ошибка",content:"Изображение не выбрано или не подходит.",classes:["modal-warning"]});return}try{var t=new FormData;t.append("postId",n("#Id").val());t.append("fileExt",".png");t.append("file",u);t.append("__RequestVerificationToken",n("input[name=__RequestVerificationToken]").val());n.ajax({url:h,data:t,cache:!1,contentType:!1,processData:!1,type:"POST",success:c})}catch(r){console.log(r)}});return{Key:f,CanUploadImage:i,ImageBlobData:u}}var r=new Map;t.imageUploader={createImageUploader:function(n){var t=new i(n);r.set(t.Key,t)}}}(window.jQuery,window.utils=window.utils||{}),function(n){"use strict";function i(n){return document.createElementNS(r,n)}function f(n,t){var r=document.createElement("canvas"),i=r.getContext("2d");return i.font=t,i.measureText(n).width}var r="http://www.w3.org/2000/svg",u=.14,t=new Map;n.ProcessPage=function(){for(var i,o,f=document.querySelectorAll("img[data-holder]"),u=0;u<f.length;u++){var r=f.item(u),s=r.getAttribute("data-holder"),e="";r.hasAttribute("data-holder-text")&&(e=r.getAttribute("data-holder-text"));i={};o=s.split(" ");o.forEach(function(n){var t=n.split(":");i[t[0]]=t[1]});i.text=e;i.hasOwnProperty("t")&&t.has(i.t)?r.setAttribute("src",n.FromTemplate(i.t).Base64Image()):r.setAttribute("src",n.SVG(i).Base64Image())}};n.AddTemplate=function(n,i){t.set(n,i)};n.FromTemplate=function(i){return n.SVG(t.get(i))};n.SVG=function(n){var e=n.width||1,o=n.height||1,v=n.bg||"#f2f2f2",y=n.fg||"#7c7c7c",p=Math.min(e,o)*u,w=`font: bold ${p}px Arial;`,l=n.css||undefined,r=i("svg"),s,h,c,a,t;return r.setAttribute("width",e),r.setAttribute("height",o),l&&r.setAttribute("style",l),s=i("rect"),s.setAttribute("width",e),s.setAttribute("height",o),s.setAttribute("fill",v),r.appendChild(s),h="",h=n.text===""?`${e}x${o}`:n.text,c=document.createTextNode(h),a=f(c.textContent),console.log(`textWidth: ${a}, svgWidth: ${e}`),t=i("text"),t.setAttribute("x",e/2),t.setAttribute("y",o/2),t.setAttribute("text-anchor","middle"),t.setAttribute("alignment-baseline","middle"),t.setAttribute("fill",y),t.setAttribute("style",w),t.appendChild(c),r.appendChild(t),{DOMElement:r,Base64Image:function(){var n=(new XMLSerializer).serializeToString(r),t=window.btoa(n);return"data:image/svg+xml;base64,"+t}}};document.addEventListener("DOMContentLoaded",()=>{imagePlaceholder.ProcessPage()})}(window.imagePlaceholder=window.imagePlaceholder||{}),function(n){"use strict";function r(n){if(n.lbContent===undefined&&n.rbContent===undefined)return`<button name="leftButton" type="button" class="btn btn-warning" data-dismiss="modal">${l10n.getString(t+".Close")}</button>`;var i="";return n.lbContent!==undefined&&(i+=`<button name="leftButton" type="button" class="btn btn-default" data-dismiss="modal">${n.lbContent}</button>`),n.rbContent!==undefined&&(i+=`<button name="rightButton" type="button" class="btn btn-default" data-dismiss="modal">${n.rbContent}</button>`),i}var t="bsModal",i;l10n.addLocaleMap({ru:{"bsModal.Close":"Закрыть"},en:{"bsModal.Close":"Close"}});i=function(t){var i=n(`<div class="${t.classString}" tabindex="-1" role="dialog">`+'<div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>'+`<h4 class="modal-title">${t.title}</h4>`+"<\/div>"+`<div class="modal-body">${t.content}</div>`+`<div class="modal-footer">${r(t)}</div>`+"<\/div><\/div><\/div>");return t.id&&i.prop("id",t.id),i};n.fn[t]=function(t){for(var r,f="modal fade",u=0;u<t.classes.length;u++)f+=" "+t.classes[u];t=n.extend({classString:f},t);r=new i(t);r.on("hidden.bs.modal",function(){r.remove()});if(t.lbCallback)r.find('button[name="leftButton"]').on("click",t.lbCallback);if(t.rbCallback)r.find('button[name="rightButton"]').on("click",t.rbCallback);return this.append(r),r.modal(),this}}(window.jQuery),function(n,t){t.leftButtonDeleteSingleItemPost=function(t,i){return function(){var r=t.itemId,u=t.postUrl,f=n("input[name=__RequestVerificationToken]").val();n.post(u,{id:r,__RequestVerificationToken:f},i)}};t.leftButtonDeleteMultipleItemsPost=function(t,i){return function(){var r=t.postUrl,u=t.itemIds,f=n("input[name=__RequestVerificationToken]").val();n.post(r,{"ids[]":u,__RequestVerificationToken:f},i)}}}(window.jQuery,window.adminPanelCallbacks=window.adminPanelCallbacks||{});